{% extends 'base.html.twig' %}
{% block title %}SNOWTRICKS • Nouveau Trick{% endblock %}
{% block body %}

<v-card class="special-background"></v-card>

{% if app.user %}

<v-card class="special-background">
    <v-img src="/backgrounds/background1.jpg" height="100%" width="100%"></v-img>
</v-card>

<!-- CRÉATION D'UN ARTICLE -->
{{ form_start(createFigure) }}

<v-container mt-3 mb-n2>
    <v-row
    align="center"
    justify="center"
    class="new-trick-box"
    >
        <v-col class="white--text text-center create-col-1" cols="12">

            <p class="new-post-title">NOUVEAU TRICK</p>

            <p class="create-chapter-btn-box">

                <span class="mini-background-2">

                    <a class="feature_arrow_btn">
                        <i class="interactive_btn fas fa-arrow-up"></i>
                    </a>

                    <a class="feature_pen_btn">
                        <i class="interactive_btn fas fa-pen"></i>
                    </a>

                    <a class="feature_trash_btn">
                        <i class="interactive_btn far fa-trash-alt"></i>
                    </a>

                </span>

            </p>

        </v-col>

        <!-- EDITION DE L'IMAGE EN UNE AVEC PREVIEW INTERACTIVE -->
        <div class="create_feature_box"> 

            {{ form_row(createFigure.image, {'label': ' ', 'attr': {'class': "create_featured_input", 'placeholder': "URL DE L'IMAGE", 'alt' : "IMAGE PRINCIPALE"}}) }}
                    
        </div>

        <v-col cols="12 mt-n12">  
                <v-img
                class="default_img"
                :aspect-ratio="16/9"
                src="/backgrounds/default_picture.jpg"
                alt="Image par défaut"
                title="Image par défaut"
                >
                {# <span class="my-span-title">
                    NOUVEAU TRICK
                </span> #}
                </v-img>

        </v-col>
        <v-col class="create-col-title" cols="12" md="6">  

                {{ form_row(createFigure.title, {'label': 'TITRE', 'attr': {'placeholder': "TITRE DE L'ARTICLE"}}) }}
                
                    
        </v-col>
    </v-row>
</v-container>

<!-- BOUTONS POUR AFFICHER LES MÉDIAS EN VERSION SMARTHPONE -->
<v-container class="control-medias-container">
    <v-col class="text-center" cols="12" > 
        <v-btn
        class="control-medias font-weight-bold"
        color="primary"
        dark
        >
        ÉDITER LES MÉDIAS
        </v-btn>
        <v-btn
        class="control-medias-2 font-weight-bold"
        color="primary"
        dark
        >
        FERMER L'ONGLET
        </v-btn>
    </v-col>
</v-container>

<!-- CHAMP D'ÉDITION DES MÉDIAS DE L'ARTICLE -->
<v-container class="medias-grid" mt-4>
    <v-layout row wrap>
        <v-col cols="12">
            <v-row class="next_textarea_box">       

                {% for screen in createFigure.screens %}

                <!-- 5 mars : ajout de boutons de modifications des médias -->
                <v-col
                cols="12"
                md="2"
                class="flex_col_{{ loop.index0 }}"
                >

                    <div class="create_media_{{ loop.index0 }}">

                        <img class="photo-step-errors" src="/backgrounds/default_screen_1.jpg" alt="Illustration" title="Illustration" />

                        <v-img class="photo-step-regular default_picture_{{ loop.index0 }}" src="/backgrounds/default_picture_2.jpg" alt="Illustration" title="Illustration">
                        </v-img>
                        {{ form_row(screen.thumbnail, {'label': ' ', 'attr': {'class': "screen_class",'placeholder': "URL IMAGE OU VIDÉO YOUTUBE", 'alt' : "Médias"}}) }}  

                    </div> 

                    <p class="text-center medias-multi-buttons">
                        <a class="change_input_btn_{{ loop.index0 }}">
                            <i class="interactive_btn fas fa-pen"></i>
                        </a>
                        
                        <a class="hidden_btn hide_input_btn_{{ loop.index0 }}">
                            <i class="interactive_btn fas fa-arrow-up"></i>
                        </a>
                        
                        <a class="trash_media_btn_{{ loop.index0 }}">
                            <i class="interactive_btn fas fa-trash"></i>
                        </a>
                        
                        <a class="hidden_btn restore_media_btn_{{ loop.index0 }}">
                            <i class="interactive_btn fas fa-plus"></i>
                        </a>
                    </p>

                </v-col>
                <!-- 5 mars : fin d'ajout de boutons de modifications des médias -->

                {% endfor %}

            </v-row>

            <p class="text-center">
                <a class="media_next_row_btn_1">
                    <i class="interactive_btn_2 fas fa-plus-circle"></i>
                </a>
                <a class="media_next_row_btn_2">
                    <i class="interactive_btn_2 fas fa-plus-circle"></i>
                </a>
                <a class="media_next_row_btn_3">
                    <i class="interactive_btn_2 fas fa-plus-circle"></i>
                </a>
            </p>

        </v-col>
    </v-layout>
</v-container>

<!-- EDITION DE L'ARTICLE -->
<v-container>
    <v-layout row wrap>
        <v-col cols="12">
            <v-card flat class="pa-5" color="rgba(255,255,255,0.4)">  
                <v-col 
                md="10"
                offset-md="1"
                >
                {{ form_row(createFigure.content, {'label': ' ', 'attr': {'alt' : "Contenu"}}) }}
                </v-col>
                <v-col 
                md="4"
                offset-md="4"
                >
                {{ form_row(createFigure.classification, {'label': 'CATÉGORIE','label_attr': {'class': 'special-label'}}) }}
                </v-col>
                <!-- BOUTON DE RESTAURATION DES URLS YOUTUBE PUIS VÉRIFICATIONS D'URL SCREENS -->
                <a>
                <p class="special-button confirm-btn" id="check_screen">
                Confirmer&nbsp;&nbsp;<i class="fas fa-pen"></i>
                </p>
                </a>
                <div class="medium-spacer"></div>
                <!-- BOUTON POUR RECOMMENCER LES SAISIES -->
                <a>
                <p class="special-button redo-btn" id="update_screen">
                Recommencer&nbsp;&nbsp;<i class="fas fa-redo"></i>
                </p>
                </a>
                <div class="regular-spacer"></div>
                <button id="save_post" type="submit" class="edit-post-button create-btn">
                Ajouter&nbsp;&nbsp;<i class="fas fa-pen"></i>
                </button>
                <div class="medium-spacer"></div>
                <div class="medium-spacer"></div>
            {{ form_end(createFigure) }}
            </v-card>
        </v-col> 
    </v-layout>
</v-container>

{% else %}

<v-container>
    <v-layout row wrap>
        <v-col cols="12">
            <v-card class="white--text text-center pa-5" outlined color="rgba(255,255,255,0)"> 
                <p class="font-weight-bold">CONNEXION NÉCESSAIRE</p>
            </v-card>
        </v-col> 
    </v-layout>
</v-container>
    
<div class="big-spacer"></div>
<div class="big-spacer"></div>

{% endif %}
{% endblock %}

{% block javascripts %}
<script src="{{ asset('js/tinyMce/tinymce.min.js') }}"></script>
<script src="{{ asset('js/tinyMce/tinyInit.js') }}"></script>
<script src="{{ asset('js/tinyMce/langs/fr_FR.js') }}"></script>
<script src="{{ asset('js/events/create.js') }}"></script>
<script src="{{ asset('js/events/preview.js') }}"></script>
{% endblock %}
